(this["webpackJsonptextventure-play"]=this["webpackJsonptextventure-play"]||[]).push([[0],{58:function(e,t,n){e.exports=n(66)},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n(18),i=n(51),s=n(14),l=n(15),u=n(17),h=n(16),p=n(4),d=n(105),m=n(106),f=n(104),b=n(19),g=n(99),v=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.classes,a=e.className,o=e.whiteSpace;return r.a.createElement(g.a,{className:[n.spacing,n[o],a].join(" ")},t)}}]),n}(a.Component);v.defaultProps={whiteSpace:"pre-line"};var j,y=Object(p.a)((function(e){var t=e.spacing;return{spacing:Object(b.a)({margin:t(2),padding:t(3)},e.breakpoints.up("md"),{margin:t(4)}),"pre-line":{whiteSpace:"pre-line"}}}))(v),O=n(109),E=n(50),k=Object(E.a)(),w=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClick=function(){var t=e.props,n=t.choiceId,a=t.currentId,r=k.location.search.replace("id=".concat(a),"id=".concat(n));k.push(r)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.classes;return r.a.createElement(O.a,{className:[a.button,n].join(" "),color:"primary",onClick:this.onClick},t)}}]),n}(a.Component),C=Object(p.a)({button:{letterSpacing:"initial",textAlign:"left",textTransform:"none"}})(w),S=function(e){if("string"===typeof e)return e;if(e instanceof Object)for(var t in e)return t},L=function(e){if(e instanceof Object)for(var t in e)return e[t]},x=function(e){return e.trim().replace(/\n/g,"")},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=arguments.length>2?arguments[2]:void 0;switch(t){case"html":return r.a.createElement(n||"div",{dangerouslySetInnerHTML:{__html:x(e)}});case"markdown":return j||((j=new window.marked.Renderer).link=function(e,t,n){return'<a href="'.concat(e,'" rel="noreferrer noopener" target="_blank">').concat(n,"</a>")}),r.a.createElement(n||"div",{dangerouslySetInnerHTML:{__html:x(window.marked(e,{headerIds:!1,renderer:j}))}});case"text":default:return n?r.a.createElement(n,null,e):e}},R=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.choices,n=e.classes,a=e.config.renderer,o=e.id,c=e.text;return r.a.createElement(y,null,r.a.createElement("div",{className:"branch"},c&&I(c,a,"text"===a?"p":"div")),t instanceof Array&&r.a.createElement("div",{className:n.choices},t.map((function(e,t){return r.a.createElement(C,{choiceId:L(e),currentId:o,key:t},I(S(e),a,"span"))}))))}}]),n}(a.Component);R.defaultProps={config:{}};var B=Object(p.a)((function(e){var t=e.spacing;return{choices:{marginTop:e.typography.pxToRem(t(2))}}}))(R),T=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.branches,n=e.config,a=e.id,o=t[a],c=L(o),i=S(o);return r.a.createElement("main",null,r.a.createElement(B,{choices:c,config:n,id:a,text:i}))}}]),n}(a.Component),U=n(111),M=n(108),N=n(103),A={error:"",value:""},_=window.location.origin+"/play/demo.yaml",W=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=Object(c.a)({},A,{message:""}),e.onClose=function(){return e.setState({message:""})},e.handleChange=function(t){var n=t.target.value,a=Object(c.a)({},A,{value:n});try{new URL(n)}catch(r){a.error="Invalid URL"}e.setState(a)},e.onSubmit=function(t){t.preventDefault(),k.push("?url=".concat(encodeURIComponent(e.state.value)))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.error,n=e.message,a=e.value;return r.a.createElement(y,null,n&&r.a.createElement(U.a,{autoHideDuration:6e3,message:n,onClose:this.onClose,open:Boolean(n)}),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(N.a,{gutterBottom:!0,variant:"h5"},"Load Story"),r.a.createElement(M.a,{autoFocus:!0,error:Boolean(t),fullWidth:!0,helperText:t,InputLabelProps:{shrink:!0},label:"URL",margin:"normal",name:"url",onChange:this.handleChange,placeholder:_,required:!0,spellCheck:!1,type:"url",value:a}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(O.a,{color:"primary",size:"medium",type:"submit",variant:"contained"},"Load")))}}]),n}(a.Component),F=function(e){var t,n=e.palette,a=e.spacing,r=e.typography,o=r.pxToRem,i=o(a(2)),s={"@global":(t={},Object(b.a)(t,".branch",{"& h1":Object(c.a)({},r.h1,{marginBottom:i}),"& h2":Object(c.a)({},r.h2,{marginBottom:i}),"& h3":Object(c.a)({},r.h3,{marginBottom:i}),"& h4":Object(c.a)({},r.h4,{marginBottom:i}),"& h5":Object(c.a)({},r.h5,{marginBottom:i}),"& h6":Object(c.a)({},r.h6,{marginBottom:i}),"& p":Object(c.a)({},r.body2,{letterSpacing:"initial",marginBottom:o(a(1))})}),Object(b.a)(t,"code",{fontFamily:'Consolas, "Liberation Mono", Menlo, Courier, monospace',border:"1px solid ".concat(n.grey[400]),borderRadius:3,padding:"3px 6px"}),Object(b.a)(t,"em",{fontStyle:"italic"}),Object(b.a)(t,"main",{display:"block"}),Object(b.a)(t,"strong",{fontWeight:r.fontWeightMedium}),t),grid:{maxWidth:720},progress:{marginTop:a(4)}};return s},D={mode:"cors"},H=function(e){return fetch(e,D).then((function(e){if(e.ok)return e.text();throw new Error("URL: "+(e.statusText||e.status))})).then((function(e){try{return window.jsyaml.load(e)}catch(t){throw new Error("YAML: Unable to parse")}})).then((function(e){if(!(e instanceof Object))throw new Error("YAML: Missing values");return e}))},P=n(49),z=function(e){if("string"!==typeof e)throw TypeError("First argument must be a string");return"?"===e[0]&&(e=e.slice(1)),e?e.split("&").reduce((function(e,t){var n=t.split("="),a=Object(P.a)(n,2),r=a[0],o=a[1];switch(r=decodeURIComponent(r),o=void 0===o?"":decodeURIComponent(o),typeof e[r]){case"undefined":e[r]=o;break;case"string":e[r]=[e[r],o];break;case"object":e[r].push(o)}return e}),{}):{}},J=function(e){if(!e||"object"!==typeof e)throw TypeError("First argument must be an object");return"?"+Object.keys(e).reduce((function(t,n){var a=e[n];return void 0!==a&&null!==a||(a=""),t.push(encodeURIComponent(n)+"="+encodeURIComponent(a)),t}),[]).join("&")},Y={renderer:"text",start:"start"},q={branches:{},config:Y,id:Y.start,isLoading:!1},G=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=q,e.historyListener=function(t){var n=z(t.search);if(n.url)if(e.hasLoaded){var a=n.id;a&&a!==e.state.id&&e.setState({id:a})}else e.setState({isLoading:!0},(function(){e.loadStory(n.url,n)}));else e.setState(q)},e.loadStory=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.hasLoaded=!0,H(t).then((function(t){var a=t._config,r=Object(i.a)(t,["_config"]),o={isLoading:!1};r&&a?(o.branches=r,o.config=Object(c.a)({},Y,{},a),n.id?o.id=n.id:(o.id=a.start||Y.start,k.push(J(Object(c.a)({},n,{id:o.id})))),e.setState(o)):e.setState(o)})).catch((function(){e.hasLoaded=!1,e.setState({isLoading:!1},(function(){return k.push("/play")}))}))},e.selectChoice=function(t){return e.setState({id:t})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.historyListener(k.location),this.unlisten=k.listen(this.historyListener)}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){var e,t=this.props.classes,n=this.state,a=n.branches,o=n.config,c=n.id,i=n.isLoading;return e=Object.keys(a).length?r.a.createElement(T,{branches:a,config:o,id:c}):i?r.a.createElement("div",{className:t.progress},r.a.createElement(f.a,null)):r.a.createElement(W,null),r.a.createElement(d.a,null,r.a.createElement(m.a,{container:!0,justify:"center"},r.a.createElement(m.a,{item:!0,xs:12,className:t.grid},e)))}}]),n}(a.Component),K=G=Object(p.a)(F)(G),Q=n(48),V=n(107),X=Object(Q.a)({typography:{fontSize:18}}),Z=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(V.a,{theme:X},this.props.children)}}]),n}(a.Component);Object(o.render)(r.a.createElement(Z,null,r.a.createElement(K,null)),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.deee7375.chunk.js.map